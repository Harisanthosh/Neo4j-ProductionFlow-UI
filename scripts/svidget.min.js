/* Svidget.js v0.3.4 on 2015-07-04, Copyright 2015 Joe Agster http://www.svidget.org MIT License */
!function(a,b){"function"==typeof define&&define.amd?define(["svidget"],b):"object"==typeof module&&module.exports?module.exports=b:a.svidget=b(a)}(this,function(a,b){var c="0.3.4",d={},e=a,f=e.document||{};d.root=null,d.global=a,d.version=c,d.declaredHandlerName="_declared",d.emptyArray=[],d.defaultType="object",d.array=function(a){if(!a||!a.length)return null;try{return d.emptyArray.slice.call(a,0)}catch(b){for(var c=[],e=0;e<a.length;e++)c.push(a[e]);return c}},d.isArray=function(a){return null!=a&&(Array.isArray(a)||Array.prototype.isPrototypeOf(a)||a.length&&a.push)},d.isFunction=function(a){return"function"==typeof a},d.isString=function(a){return"string"==typeof a||a.length&&a.trim&&a.charAt},d.isColor=function(){return!1},d.convert=function(a,b,c,e){return d.Conversion.to(a,b,c,e)},d.getType=function(a){if(null==a)return d.defaultType;if(d.isArray(a))return"array";var b=typeof a;return"string"===b||"number"===b||"boolean"===b?b:"object"},d.resolveType=function(a){return a=d.Conversion.toString(a),void 0===d.ParamTypes[a]?d.defaultType:"bool"===a?"boolean":a},d.resolveSubtype=function(a,b){return a=d.resolveType(a),void 0===d.ParamSubTypes[b]?null:"string"!=a||"color"!=b&&"regex"!=b&&"color"!=b?"number"==a&&"integer"==b?b:null:b},d.extend=function(a,b,c){for(var d in b)(c||void 0===a.prototype[d])&&(a.prototype[d]=b[d])},d.wrap=function(a,b){if(null==a||"function"!=typeof a)return void 0;var c=function(){return a.apply(b,arguments)};return c},d.findFunction=function(b,c){if("function"==typeof b)return b;if(null==c&&(c=e),null!=b){var d=b+"",f=c[d];return null==f&&c!==a&&(f=a[d]),null==f?null:"function"==typeof f?f:new Function("return "!=d.substr(0,7)?"return "+d:d)}return null},d.log=function(a){d.Settings.enableLogging&&console.log(a)},d.readOnlyProperty=function(a){return{enumerable:!0,configurable:!1,writable:!1,value:a}},d.fixedProperty=function(a){return{enumerable:!0,configurable:!1,writable:!0,value:a}},d.getPrivateAccessor=function(a){return function(b){return a[b]}},d.setPrivateAccessor=function(a){return function(b,c){return a.writable.contains(b)?(a[b]=c,!0):!1}},d.returnFalse=function(){return!1},d.returnTrue=function(){return!0},d.Settings={},d.Settings.showPrivates=!0,d.Settings.enableLogging=!1,Array.prototype.contains||(Array.prototype.contains=function(a){for(var b=this.length;b--;)if(this[b]===a)return!0;return!1}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),d.ObjectPrototype={setup:function(a){this.getPrivate=d.getPrivateAccessor(a),this.setPrivate=d.setPrivateAccessor(a),d.Settings.showPrivates&&(this.privates=a)},getset:function(a,b,c,e){var f=this.getPrivate(a);if(void 0===b)return f;if(null!=c&&(b=d.convert(b,c)),b===f)return!1;if(e&&!e.call(this,b))return!1;var g=this.setPrivate(a,b);return g},select:function(a,b){return"number"==typeof b?(b=parseInt(b),a.wrap(a.getByIndex(b))):"function"==typeof b?a.where(b):void 0!==b?a.wrap(a.getByName(b+"")):a},selectFirst:function(a,b){return"number"==typeof b?(b=parseInt(b),a.getByIndex(b)):"function"==typeof b?a.first(b):void 0!==b?a.getByName(b+""):a.first()},wireCollectionAddRemoveHandlers:function(a,b,c){null!=a&&(a.onAdded(d.wrap(b,this)),a.onRemoved(d.wrap(c,this)))}},d.EventPrototype=function(a){this.eventTypes=new d.Collection(a)},d.EventPrototype.prototype={on:function(a,b,c,e){var f=d.isFunction(e)?4:d.isFunction(c)?3:d.isFunction(b)?2:1;return e=4==f?e:3==f?c:2==f?b:null,b=f>2?b:null,c=f>3?c:null,e?this.addHandler(a,e,c,b):!1},off:function(a,b){var c=d.isFunction(b)?b:null,e=null!=c?null:b;return this.removeHandler(a,c,e)},trigger:function(a,b,c){if(null!=a){var e=this.triggerHandlers(a,b,c);d.log("trigger: "+a),e.isPropagationStopped()||this.bubble(a,e)}},triggerHandlers:function(a,b,c){var e=new d.Event(null,a,null,this.getTarget(),c,b);if(null==a||null==this.handlers||null==this.handlers[a])return e;var f=this.handlers[a];return f.each(function(a){return e.isImmediatePropagationStopped()?!1:void(null!=a&&null!=a.handler&&"function"==typeof a.handler&&(e.name=a.name,e.data=a.data,a.handler.call(null,e)))}),e},bubble:function(a,b){this.ensureBubbleParents(),b.name=null,b.data=null,this.bubbleParents[a]&&this.bubbleParents[a](a,b,this.getTarget())},addHandler:function(a,b,c,d){if(this.ensureHandlersByType(a),this.handlerExists(a,b,c))return!1;var e=this.toHandlerObject(b,c,d);return this.handlers[a].push(e),!0},removeHandler:function(a,b,c){if(this.ensureHandlers(),!this.handlers[a])return!1;var d=this;return this.handlers[a].removeWhere(function(a){return d.handlerMatch(a,b,c)})},handlerExists:function(a,b,c){var d=this,e=this.handlers[a].any(function(a){return d.handlerMatch(a,b,c)});return e},handlerMatch:function(a,b,c){return null!=c&&a.name===c?!0:b===a.handler?!0:!1},setBubbleParent:function(a,b){this.ensureBubbleParents(),this.bubbleParents[a]=b},registerBubbleCallback:function(a,b,c){if(b&&c)for(var e=0;e<a.length;e++)this.setBubbleParent(a[e],d.wrap(c,b))},toHandlerObject:function(a,b,c){var d={handler:a,name:b,data:c};return d},bubbleFuncs:function(){},ensureHandlers:function(){this.handlers||(this.handlers={})},ensureHandlersByType:function(a){this.ensureHandlers(),this.handlers[a]||(this.handlers[a]=new d.Collection)},ensureBubbleParents:function(){this.bubbleParents||(this.bubbleParents={})},getTarget:function(){return this}},d.ParamPrototype={name:function(a){if(void 0!==a)return!1;var b=this.getPrivate("name");return b},description:function(a){var b=this.getset("description",a,"string");return void 0!==a&&b?(a=this.getPrivate("description"),this.trigger&&this.trigger("change",{property:"description",value:a}),!0):b},type:function(a){null===a&&(a=d.resolveType(null)),"bool"==a&&(a="boolean");var b=this.getset("type",a,"string",this.validateType);return void 0!==a&&b?(a=this.getPrivate("type"),this.trigger&&this.trigger("change",{property:"type",value:a}),!0):b},subtype:function(a){var b=this.getset("subtype",a,"string",this.validateSubtype);return void 0!==a&&b?(a=this.getPrivate("subtype"),this.trigger&&this.trigger("change",{property:"subtype",value:a}),!0):b},typedata:function(a){var b=this.getset("typedata",a,"string");return void 0!==a&&b?(a=this.getPrivate("typedata"),this.trigger&&this.trigger("change",{property:"typedata",value:a}),!0):b},defvalue:function(a){var b=this.getset("defvalue",a);return void 0!==a&&b?(this.trigger&&this.trigger("change",{property:"defvalue",value:a}),!0):b},validateType:function(a){return void 0!==d.ParamTypes[a]},validateSubtype:function(){return!0},_resolveType:function(a,b,c){return b=null!=b?b:c,a=null==a?d.getType(b):d.resolveType(a)}},d.Collection=function(a){this.__type="Svidget.Collection",this.source=a,a&&(d.isArray(a)||Array.prototype.isPrototypeOf(a))&&this.push.apply(this,a)},d.Collection.prototype=new Array,d.extend(d.Collection,{any:function(a){if(null==a)return this.length>0;for(var b=0;b<this.length;b++)if(a(this[b]))return!0;return!1},all:function(a){if(null==a)return!1;for(var b=0;b<this.length;b++)if(!a(this[b]))return!1;return!0},contains:function(a){return this.indexOf(a)>=0},each:function(a){for(var b=0;b<this.length;b++){var c=a(this[b]);if(c===!1)break}},first:function(a){if(0==this.length)return null;if(null==a)return this[0];for(var b=0;b<this.length;b++)if(a(this[b]))return this[b];return null},last:function(a){if(0==this.length)return null;if(null==a)return this[0];for(var b=this.length-1;b>=0;b--)if(a(this[b]))return this[b];return null},select:function(a){for(var b=[],c=0;c<this.length;c++)b.push(a(this[c]));return new d.Collection(b)},where:function(a){for(var b=[],c=0;c<this.length;c++)a(this[c])&&b.push(this[c]);return new d.Collection(b)},add:function(a){var b=this.indexOf(a);return b>=0?!1:(this.push(a),!0)},addRange:function(a){return d.isArray(a)?(this.push.apply(this,a),!0):!1},insert:function(a,b){return b=parseInt(b),!isNaN(b)&&(0>b||b>this.length)?!1:(this.splice(b,0,a),!0)},remove:function(a){var b=this.indexOf(a);return 0>b?!1:(this.splice(b,1),!0)},removeAll:function(a){for(var b=!1;this.remove(a);)b=!0;return b},clear:function(){return this.splice(0,this.length),!0},removeWhere:function(a){for(var b=[],c=!1,d=0;d<this.length;d++)a(this[d])&&b.push(this[d]);for(var d=0;d<b.length;d++)c=this.remove(b[d])||c;return c},toArray:function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]);return a}}),d.ObjectCollection=function(a,b){d.Collection.apply(this,[a]),this.__type="Svidget.ObjectCollection",this._ctor=d.ObjectCollection;var c=new function(){this.writable=["addedFunc","removedFunc"],this.type=b,this.addedFunc=null,this.removedFunc=null};this.setup(c)};var g=new d.Collection;return d.ObjectCollection.prototype=g,d.ObjectCollection.prototype.base_add=g.add,d.ObjectCollection.prototype.base_remove=g.remove,d.extend(d.ObjectCollection,{get:function(a){return"number"==typeof a?col.getByIndex(a):col.getByName(a)},getByIndex:function(a){if(null==a||isNaN(a))return null;a=parseInt(a);var b=this[a];return null==b?null:b},getByName:function(a){return this.first(function(b){return b.name()==a})},type:function(){return this.getset("type")},add:function(){if(0==arguments.length)return null;var a,b,c;return arguments.length>=1&&(b=arguments[0]),a="string"==typeof b?this.create.apply(this,arguments):b,null==a?null:(c=this.addObject(a))?(this.triggerAdded(a),a):null},addObject:function(a){return null==a||!a instanceof this.type()?!1:void 0!==a.name&&null!=this.getByName(a.name())?!1:(this.push(a),a)},create:function(){return null},remove:function(a){var b=this.getByName(a);if(null==b)return!1;var c=this.base_remove(b);return c?(this.triggerRemoved(b),!0):!1},wrap:function(a){var b=[a];(null==a||!a instanceof this.type())&&(b=[]);var c=new d.Collection(b);return c},onAdded:function(a){this.getset("addedFunc",a)},onRemoved:function(a){this.getset("removedFunc",a)},triggerAdded:function(a){var b=this.getset("addedFunc");b&&b(a)},triggerRemoved:function(a){var b=this.getset("removedFunc");b&&b(a)}},!0),d.extend(d.Collection,d.ObjectPrototype),d.Communicator=function(){this.__type="Svidget.Communicator",this.sameDomain=null,this._init()},d.Communicator.prototype={_init:function(){this.addMessageEvent()},addMessageEvent:function(){e.addEventListener&&e.addEventListener("message",d.wrap(this.receiveXSM,this),!1)},receiveFromParent:function(a,b){svidget.receiveFromParent(a,b)},receiveFromWidget:function(a,b,c){svidget.receiveFromWidget(a,b,c)},receiveXSM:function(a){if(null!=a){var b=a.data;null!=b&&(void 0!==b.widget?this.receiveFromWidget(b.name,b.payload,b.widget):this.receiveFromParent(b.name,b.payload))}},signalParent:function(a,b,c){this.isParentSameDomain()?this.signalParentDirect(a,b,c):this.signalParentXSM(a,b,c)},signalParentDirect:function(a,b,c){if(null!=e.parent&&e!==e.parent&&null!=e.parent.svidget&&e.parent.svidget){var d=e.parent.svidget;setTimeout(function(){d.routeFromWidget(a,b,c)},0)}},signalParentXSM:function(a,b,c){if(null!=e.parent&&null!=e.parent.postMessage){var d=this.buildSignalParentMessage(a,b,c);e.parent.postMessage(d,"*")}},buildSignalParentMessage:function(a,b,c){return{name:a,payload:b,widget:c}},isParentSameDomain:function(){return null==this.sameParentDomain&&(this.sameParentDomain=this.checkParentSameDomain()),this.sameParentDomain},checkParentSameDomain:function(){if(null==e.parent)return!1;try{{e.parent.document}return!0}catch(a){return!1}},signalWidget:function(a,b,c){d.log("communicator: signalWidget {name: "+b+"}"),a.isCrossDomain()?this.signalWidgetXSM(a,b,c):this.signalWidgetDirect(a,b,c)},signalWidgetDirect:function(a,b,c){if(null!=a){var d=a.root();null!=d&&setTimeout(function(){d.receiveFromParent(b,c)},0)}},signalWidgetXSM:function(a,b,c){if(null!=a&&null!=a.window()){var e=this.buildSignalWidgetMessage(b,c);setTimeout(function(){d.log("communicator: postMessage"),a.window().postMessage(e,"*")},0)}},buildSignalWidgetMessage:function(a,b){return{name:a,payload:b}}},d.Conversion={},d.Conversion.to=function(a,b,c,e){var f=d.ParamTypes[b]||d.ParamTypes.object,g=d.ParamSubTypes[c]||d.ParamSubTypes.none;switch(f){case d.ParamTypes.string:return d.Conversion.toString(a,g,e);case d.ParamTypes.number:return d.Conversion.toNumber(a,g==d.ParamSubTypes.integer);case d.ParamTypes.bool:return d.Conversion.toBool(a);case d.ParamTypes.array:return d.Conversion.toArray(a);default:return d.Conversion.toObject(a)}},d.Conversion.toString=function(a,b,c){return null==a?null:b==d.ParamSubTypes.choice?d.Conversion.toChoiceString(a,c):d.isArray(a)||"object"==typeof a?JSON.stringify(a):a+""},d.Conversion.toChoiceString=function(a,b){if(a+="",null==b)return a;var c=b.split("|");return null==c||0==c.length?null:c.indexOf(a)>=0?a:c[0]},d.Conversion.toNumber=function(a,b){return a?a===!0?1:b?parseInt(a+""):(a=parseFloat(a),isNaN(a)&&(a=0),a):0},d.Conversion.toBool=function(a){var b=a+"";return"false"==b.toLowerCase()?!1:0===+a?!1:!!a},d.Conversion.toArray=function(a){if(null==a)return a;if(d.isArray(a))return a;if(d.Conversion.isArrayString(a)){var b=d.Conversion.parseArray(a);if(null!=b)return b}return[a]},d.Conversion.toObject=function(a){if(null==a)return a;if(d.Conversion.isJSONString(a)){var b=d.Conversion.jsonifyString(a);try{return JSON.parse(b)}catch(c){}}return a},d.Conversion.isJSONString=function(a){return a?(a=(a+"").trim(),a.length>0&&d.isString(a)&&"{"==a.charAt(0)&&"}"==a.charAt(a.length-1)):!1},d.Conversion.isArrayString=function(a){return null==a?!1:(a=(a+"").trim(),a.length>0&&"["==a.charAt(0)&&"]"==a.charAt(a.length-1))},d.Conversion.isQuotedString=function(a){return a?(a=(a+"").trim(),a.length>0&&d.isString(a)&&("'"==a.charAt(0)&&"'"==a.charAt(a.length-1)||'"'==a.charAt(0)&&'"'==a.charAt(a.length-1))):!1},d.Conversion.parseArray=function(a){a=d.Conversion.jsonifyString(a);var b='{"d":'+a+"}";try{var c=JSON.parse(b);return c&&c.d?c.d:null}catch(e){return null}},d.Conversion.jsonifyString=function(a){if(null==a||a.indexOf("'")<0)return a;a=(a+"").trim();for(var b="'",c='"',d="\\",e="",f=!1,g=null,h=!1,i=0;i<a.length;i++){var j=a[i],k=j;j==b||j==c?h?(g==b&&j==b?e=e.substr(0,e.length-1):g==b&&j==c&&(k=d+d+c),h=!1):f&&j==g?(f=!1,g=null,k=c):f&&j==c?k=d+c:f||(g=j,f=!0,k=c):j==d&&(h=!0),e+=k}return e},d.DOM={get:function(a){return f.getElementById?f.getElementById(a):null},getByName:function(a,b){return this.getChildrenByName(f,a,b)},getByNameNS:function(a,b,c){if(!f.getElementsByTagNameNS)return null;var e=f.getElementsByTagNameNS(a,b);return c?new d.Collection(d.array(e)):e},getByNameSvidget:function(a,b){return this.getByNameNS(d.Namespaces.svidget,a,b)},getChildrenByName:function(a,b,c){var e=a.getElementsByTagName(b);return c?new d.Collection(d.array(e)):e},getElement:function(a){return"string"==typeof a?this.get(a):a},getItem:function(a){return this.wrap(this.get(a))},select:function(a){function b(a){if(null==a)return null;var b,c=/@([^=#\s]+)$/g,e=a,g=c.exec(a);g&&(b=g[1],e=e.replace(g[0],""));var h;try{h=f.querySelectorAll(e)}catch(i){return null}for(var j=[],k=0;k<h.length;k++){var l,m=h[k];if(b){var n=d.DOM.attr(m,b);null!=n&&(l=new d.DOMItem(n))}else l=new d.DOMItem(m);l&&j.push(l)}return new d.Collection(j)}if(!f.querySelectorAll)return null;if(null==a)return null;var c,e=/@[^=#\s]+/g,g=e.test(a),h=new d.Collection;if(g)for(var i=a.split(","),j=0;j<i.length;j++)c=b(i[j]),c&&h.addRange(c);else c=b(a),c&&h.addRange(c);var k=new d.DOMQuery(h,a);return k},selectElement:function(a){if("string"==typeof a){var b=this.select(a);return null==b||0==b.length?null:b.item(0).source()}return this.isElement(a)?a:null},wrap:function(a){return new d.DOMItem(a)},transportize:function(a){return null==a?null:{name:a.localName,namespace:a.namespaceURI,value:a.value,type:1==a.nodeType?d.NodeType.element:2==a.nodeType?d.NodeType.attribute:null}},root:function(){return f.documentElement},rootItem:function(){return this.wrap(this.root())},attr:function(a,b){return a.attributes[b]},attrValue:function(a,b){var c=this.attr(a,b);return c?c.value:null},isAttrEmpty:function(a,b){var c=this.attrValue(a,b);return null!=c&&0==c.length},clone:function(){},cloneDetached:function(){},isDOMNode:function(a){return null==a?null:!(null==a.namespaceURI||null==a.localName||null==a.nodeType||null==a.value&&null==a.textContent||1!=a.nodeType&&2!=a.nodeType)},fromNodeType:function(a){return 1==a?"element":2==a?"attribute":3==a?"text":null},text:function(a,b){var c=this.select(a);return void 0===b?this.getText(c):void this.setText(c,b)},getText:function(a){return a.textContent?a.textContent:a.innerHTML?a.innerHTML:null},setText:function(a,b){a.textContent?a.textContent=b+"":a.innerHTML&&(a.innerHTML=b+"")},getDocument:function(a){try{{var b=a.contentDocument;null!=a.contentWindow?a.contentWindow.document:null}return null!=b&&"about:blank"==b.URL?null:b}catch(c){return void 0}},isElementDocumentReady:function(a){return null!==this.getDocument(a)},isElement:function(a){return HTMLElement?a instanceof HTMLElement:void 0},attach:function(){},detach:function(){},disable:function(a){a.disabled=!0},enable:function(a){a.disabled=!1},show:function(a){a.style.display="initial",a.style.visibility="visible"},hide:function(a){a.style.display="none",a.style.visibility="hidden"},on:function(a,b,c,d){d=!!d;var e=!1;return a.addEventListener?(a.addEventListener(b,c,d),e=!0):a.attachEvent&&(a.attachEvent("on"+b,c),e=!0),e},off:function(a,b,c,d){d=!!d;var e=!1;return a.removeEventListener?(a.removeEventListener(b,c,!1),e=!0):f.detachEvent&&(f.detachEvent("on"+b,c),e=!0),e}},d.DOMItem=function(a){function b(a){return a==d.NodeType.element?"element":a==d.NodeType.attribute?"attribute":null}function c(a){for(var b in d.Namespaces)if(a===d.Namespaces[b])return b}this.__type="Svidget.DOMItem",a=a||{};var e=new function(){this.writable=["value"],this.type=null,this.typeCode=null,this.name=null,this.value=null,this.namespace=null,this.source=a,this.sourceDOM=d.DOM.isDOMNode(a)};this.setup(e),e.sourceDOM?(e.typeCode=1==a.nodeType?d.NodeType.element:2==a.nodeType?d.NodeType.attribute:null,e.name=a.localName,e.namespace=a.namespaceURI):(e.typeCode=a.type,e.name=a.name,e.namespace=a.namespace),e.value=a.value||a.textContent,e.type=b(e.typeCode),e.namespaceType=c(e.namespace),this.cachedAttributes=null,this.cachedElements=null},d.DOMItem.prototype={typeCode:function(){return this.getset("type")},name:function(){return this.getset("name")},value:function(a){var b=this.source();if(void 0===a)return b.value||b.textContent;var c=a+"";b.value?b.value=c:b.textContent=c},namespace:function(){return this.getset("namespace")},namespaceType:function(){return this.getset("namespaceType")},hasElements:function(){if(this.isAttribute())return!1;var a=this.source();return this.isAttached()||a.children&&a.children.length?a.children.length>0:!1},hasAttributes:function(){if(this.isAttribute())return!1;var a=this.source();return this.isAttached()||a.attributes&&a.attributes.length?a.attributes.length>0:!1},isAttribute:function(){return this.type()==d.NodeType.attribute},elements:function(){if(null!=this.cachedElements&&d.isArray(this.cachedElements))return this.cachedElements;var a=this.isAttached(),b=this.source();if(!(a||b.elements&&b.elements.length))return null;var c=a?b.children:b.elements,e=new d.Collection(d.array(c));return e=e.select(function(a){return new d.DOMItem(a)}),this.cachedElements=e,this.cachedElements},attributes:function(){if(null!=this.cachedAttributes&&d.isArray(this.cachedAttributes))return this.cachedAttributes;var a=this.isAttached(),b=this.source();if(!(a||b.attributes&&b.attributes.length))return null;var c=b.attributes,e=new d.Collection(d.array(c));return e=e.select(function(a){return new d.DOMItem(a)}),this.cachedAttributes=e,this.cachedAttributes},source:function(){return this.getset("source")},isAttached:function(){return this.getset("sourceDOM")}},d.extend(d.DOMItem,d.ObjectPrototype),d.DOMQuery=function(a,b){this.__type="Svidget.DOMQuery";var c=new d.Collection(a),e=new function(){this.writable=[],this.items=c,this.selector=b};this.getPrivate=d.getPrivateAccessor(e),this.setPrivate=d.setPrivateAccessor(e),Object.defineProperty(this,"length",{enumerable:!0,configurable:!1,writable:!1,value:c.length||0})},d.DOMQuery.prototype={items:function(){return this.getset("items")},item:function(a){var b=this.items();return null==b?null:b[a]},hasItems:function(){return this.length>0},selector:function(){return this.getset("selector")},setValue:function(a){this.items().each(function(b){b.value(a)})},toString:function(){return'[Svidget.DOMQuery { selector: "'+this.selector()+'", items: '+this.items().length+"}]"}},d.extend(d.DOMQuery,d.ObjectPrototype),d.DocType={html:0,svg:1},d.DocReadyState={loading:0,interactive:1,complete:2},d.ElementReadyState={uninitialized:0,loading:1,loaded:2,interactive:3,complete:4},d.ParamTypes={object:0,string:1,number:2,"boolean":3,bool:3,array:4,"function":5},d.ParamSubTypes={none:0,color:1,integer:2,regex:3,choice:4},d.NodeType={element:0,attribute:1},d.Namespaces={html:"http://www.w3.org/1999/xhtml",svidget:"http://www.svidget.org/svidget",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},d.Event=function(a,b,c,e,f,g){Object.defineProperty(this,"currentTarget",d.readOnlyProperty(e)),Object.defineProperty(this,"data",d.fixedProperty(c)),Object.defineProperty(this,"name",d.fixedProperty(a)),Object.defineProperty(this,"timeStamp",d.readOnlyProperty(+new Date)),Object.defineProperty(this,"target",d.readOnlyProperty(null==f?e:f)),Object.defineProperty(this,"type",d.readOnlyProperty(b)),Object.defineProperty(this,"value",d.readOnlyProperty(g))},d.Event.prototype={isPropagationStopped:d.returnFalse,isImmediatePropagationStopped:d.returnFalse,stopPropagation:function(){this.isPropagationStopped=d.returnTrue},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},d.EventContainer=function(a,b){this.__type="Svidget.EventContainer",d.EventPrototype.apply(this,[a]),this.target=b},d.EventContainer.prototype=new d.EventPrototype,d.extend(d.EventContainer,{getTarget:function(){return this.target}},!0),d.Root=function(a,b){this.__type="Svidget.Root";var c=this;null!=a&&(e=a,f=a.document||{});var g=new function(){this.writable=["current","widgets","connected","loaded"],this.comm=new d.Communicator,this.eventContainer=new d.EventContainer(["loaded"],c),this.loaded=!1,this.current=null,this.connected=!1,this.widgets=null,this.options=b||{}};this.setup(g),this.isBrowser=!0,this.docType=null,this.setCurrent=function(a){g.current=a},this._init(),Object.defineProperty(this,"conversion",d.readOnlyProperty(d.Conversion)),Object.defineProperty(this,"Collection",d.readOnlyProperty(d.Collection)),Object.defineProperty(this,"dom",d.readOnlyProperty(d.DOM)),Object.defineProperty(this,"util",d.readOnlyProperty(d.Util)),d.root=this},d.Root.prototype={_init:function(){this._initEvents(),this._initPrototypes(),this.initInternal(),this._initReady()},_initEvents:function(){},_initPrototypes:function(){this.isWidget()?d.extend(d.Root,d.Root.WidgetPrototype,!0):d.extend(d.Root,d.Root.PagePrototype,!0)},_initReady:function(){this.isDomReady()?this._ready():this.addReadyEvents()},initInternal:function(){},_ready:function(){this.isReady=!0,this.isWidget()?this.readyWidget():this.readyPage()},getDocType:function(){if(!f.documentElement)return d.DocType.html;var a=f.documentElement.localName,b=f.documentElement.namespaceURI;return"svg"==a&&b==d.Namespaces.svg?d.DocType.svg:d.DocType.html},getOption:function(a){return this.options()[a]},isWidget:function(){return this.getOption("mode")==d.DocType.svg?!0:(this.docType=this.getDocType(),this.docType==d.DocType.svg)},isDomReady:function(){var a=f.readyState;return null!=a&&d.DocReadyState[a]?d.DocReadyState[a]>=d.DocReadyState.interactive:!1},addReadyEvents:function(){var a=d.wrap(this.readyHandler,this);d.DOM.on(f,"DOMContentLoaded",a),d.DOM.on(f,"readystatechange",a),d.DOM.on(e,"load",a)},readyHandler:function(){this.ensureReady()},ensureReady:function(){this.isReady||this._ready(),this.isReady=!0},markLoaded:function(){this.getset("loaded")!==!0&&(this.getset("loaded",!0),this.triggerLoad())},eventContainer:function(){return this.getset("eventContainer")},on:function(a,b,c,d){this.eventContainer().on(a,b,c,d)},off:function(a,b){this.eventContainer().off(a,b)},trigger:function(a,b){this.eventContainer().trigger(a,b)},loaded:function(a,b,c){this.onload(a,b,c)},onload:function(a,b,c){this.on("load",a,b,c)},offload:function(a){this.off("load",a)},offdeclaredload:function(){this.off("load",d.declaredHandlerName)},widgetloaded:function(a,b,c){this.widgetloaded(a,b,c)},onwidgetload:function(a,b,c){this.on("widgetload",a,b,c)},offwidgetload:function(a){this.off("widgetload",a)},offdeclaredwidgetload:function(){this.off("widgetload",d.declaredHandlerName)},triggerLoad:function(){this.trigger("load")},triggerWidgetLoad:function(a){this.trigger("widgetload",a)},comm:function(){return this.getset("comm")},routeFromParent:function(a,b){d.log("root: routeFromParent {name: "+a+"}"),this.comm().receiveFromParent(a,b)},routeFromWidget:function(a,b,c){d.log("root: routeFromWidget {name: "+a+"}"),this.comm().receiveFromWidget(a,b,c)},receiveFromParent:function(){},receiveFromWidget:function(){},current:function(){return null},connected:function(a){var b=this.getset("connected",a);return void 0!==a&&b?!0:b},options:function(){return this.getset("options")}},d.extend(d.Root,d.ObjectPrototype),d.Util={},d.Util.queryString=function(a,b){var c={};if(!e.location)return c;for(var f,g=null==e.location.search||e.location.search.length>0?e.location.search:"",h=/\+/g,i=/([^&=]+)=?([^&]*)/g,j=function(a){return decodeURIComponent(a.replace(h," "))},k=g.substring(1);f=i.exec(k);){var l=j(f[1]),m=j(f[2]);a?void 0!==c[l]?d.isArray(c[l])?c[l].push(m):c[l]=[c[l],m]:c[l]=m:(b||void 0===c[l])&&(c[l]=m)}return c},d.Action=function(a,b,c){function e(a){return null==a?null:("function"!=typeof a&&(a=h.toString(a)),a)}function f(a){if(null!=a&&d.isArray(a))for(var b=0;b<a.length;b++){var c=a[b];null!=c.name&&g.addParam(c.name,c)}}this.__type="Svidget.Action",b=b||{},c=c instanceof d.Widget?c:null;var g=this,h=d.Conversion,i=new function(){this.writable=["binding","bindingFunc","enabled","external","description"],this.params=new d.ActionParamCollection([],g),this.name=h.toString(a),this.description=h.toString(b.description),this.enabled=null!=b.enabled?h.toBool(b.enabled):!0,this.binding=e(b.binding),this.external=null!=b.external?h.toBool(b.external):!0,this.parent=c,this.bindingFunc=null};this.setup(i),i.bindingFunc=d.findFunction(i.binding),this.registerBubbleCallback(d.Action.eventTypes,c,c.actionBubble),this.wireCollectionAddRemoveHandlers(i.params,g.paramAdded,g.paramRemoved),f(b.params)},d.Action.prototype={name:function(a){if(void 0!==a)return!1;var b=this.getPrivate("name");return b},parent:function(){var a=this.getPrivate("parent");return a},attached:function(){var a=this.parent();return null!=a&&a instanceof d.Widget},enabled:function(a){null===a&&(a=!0);var b=this.getset("enabled",a,"bool");return void 0!==a&&b?(a=this.getset("enabled"),this.trigger("change",{property:"enabled",value:a}),!0):b},description:function(a){var b=this.getset("description",a,"string");return void 0!==a&&b?(a=this.getPrivate("description"),this.trigger("change",{property:"description",value:a}),!0):b},external:function(a){null===a&&(a=!0);var b=this.getset("external",a,"bool");return void 0!==a&&b?(a=this.getPrivate("external"),this.trigger("change",{property:"external",value:a}),!0):b},binding:function(a){if(void 0!==a){"function"!=typeof a&&null!==a&&(a+="");var b=d.findFunction(a);this.getset("bindingFunc",b)}var c=this.getset("binding",a);return void 0!==a&&c?(this.trigger("change",{property:"binding",value:a}),!0):c},bindingFunc:function(){var a=this.getset("bindingFunc");return a},invoke:function(){if(!this.enabled())return!1;var a=this.invocableBindingFunc();if(!a)return!1;var b=this.buildArgumentArray(d.array(arguments)),c=a.apply(null,b);return this.trigger("invoke",{returnValue:c}),!0},invokeApply:function(a){this.invoke.apply(this,a)},invocableBindingFunc:function(){var a=this.bindingFunc();return null==a||"function"!=typeof a?null:a},buildArgumentArray:function(a){var b=[];a=null==a?[]:a;for(var c=this.params(),d=0;d<c.length;d++){var e=c[d],f=void 0;d<a.length&&(f=a[d]),void 0===f&&(f=e.defvalue()),b.push(f)}return b},toArgumentObject:function(a){for(var b={},c=this.params(),d=0;d<c.length;d++){var e=c[d],f=void 0;d<a.length&&(f=a[d]),void 0===f&&(f=e.defvalue()),b[e.name()]=f}return b},params:function(a){var b=this.getset("params");return this.select(b,a)},param:function(a){var b=this.getset("params"),c=this.selectFirst(b,a);return c},newParam:function(a,b){return new d.ActionParam(a,b,this)},addParam:function(a,b){return this.params().add(a,b,this)},removeParam:function(a){return this.params().remove(a)},removeAllParams:function(){return this.params().clear()},paramBubble:function(a,b,c){"change"==a&&this.paramChanged(c,b.value)},paramChanged:function(a,b){d.log("action: param changed: "+a.name()),this.trigger("paramchange",b,a)},paramAdded:function(a){d.log("action: param added: "+a.name()),this.trigger("paramadd",a)},paramRemoved:function(a){d.log("action: param removed: "+a.name()),this.trigger("paramremove",a.name())},onchange:function(a,b,c){return this.on("change",a,b,c)},ondeclaredchange:function(a){return this.onchange(null,d.declaredHandlerName,a)},offchange:function(a){this.off("change",a)},offdeclaredchange:function(){return this.offchange(d.declaredHandlerName)},oninvoke:function(a,b,c){return this.on("invoke",a,b,c)},ondeclaredinvoke:function(a){return this.oninvoke(null,d.declaredHandlerName,a)},offinvoke:function(a){return this.off("invoke",a)},offdeclaredinvoke:function(){return this.offinvoke(d.declaredHandlerName)},onparamadd:function(a,b,c){return this.on("paramadd",a,b,c)},ondeclaredparamadd:function(a){return this.onparamadd(null,d.declaredHandlerName,a)},offparamadd:function(a){return this.off("paramadd",a)},offdeclaredparamadd:function(){return this.offparamadd(d.declaredHandlerName)},onparamremove:function(a,b,c){return this.on("paramremove",a,b,c)},ondeclaredparamremove:function(a){return this.onparamremove(null,d.declaredHandlerName,a)},offparamremove:function(a){return this.off("paramremove",a)},offdeclaredparamremove:function(){return this.offparamremove(d.declaredHandlerName)},onparamchange:function(a,b,c){return this.on("paramchange",a,b,c)},ondeclaredparamchange:function(a){return this.onparamchange(null,d.declaredHandlerName,a)},offparamchange:function(a){return this.off("paramchange",a)},offdeclaredparamchange:function(){return this.offparamchange(d.declaredHandlerName)},toTransport:function(){var a={name:this.name(),description:this.description(),external:this.external(),enabled:this.enabled(),params:this.toParamsTransport()};return a},toParamsTransport:function(){var a=this.params(),b=a.select(function(a){return a.toTransport()}).toArray();return b},toString:function(){return'[Svidget.Action { name: "'+this.name()+'" }]'}},d.Action.eventTypes=["invoke","change","paramchange","paramadd","paramremove"],d.Action.optionProperties=["external","binding","enabled","description"],d.Action.allProxyProperties=["name","external","enabled","description"],d.Action.writableProxyProperties=[],d.extend(d.Action,d.ObjectPrototype),d.extend(d.Action,new d.EventPrototype(d.Action.eventTypes)),d.ActionCollection=function(a,b){d.ObjectCollection.apply(this,[a,d.Action]),this.__type="Svidget.ActionCollection";this.parent=b,this._ctor=d.ActionCollection},d.ActionCollection.prototype=new d.ObjectCollection,d.extend(d.ActionCollection,{create:function(a,b,c){if(null==a)return null;if(null!=this.getByName(a))return null;var e=new d.Action(a,b,c);return e}},!0),d.ActionParam=function(a,b,c){function e(a,b){return a=null==a?d.getType(b):d.resolveType(a)}this.__type="Svidget.ActionParam",b=b||{},c=c instanceof d.Action?c:null;
var f=d.Conversion,g=new function(){this.writable=["type","subtype","typedata","description","defvalue"],this.name=f.toString(a),this.type=e(b.type,b.defvalue),this.subtype=f.toString(b.subtype),this.typedata=f.toString(b.typedata),this.description=f.toString(b.description),this.defvalue=b.defvalue,this.parent=c};this.setup(g),this.registerBubbleCallback(d.ActionParam.eventTypes,c,c.paramBubble)},d.ActionParam.prototype={parent:function(){var a=this.getPrivate("parent");return a},attached:function(){var a=this.parent();return null!=a&&a instanceof d.Action},toTransport:function(){var a={name:this.name(),type:this.type(),subtype:this.subtype(),typedata:this.typedata(),description:this.description(),defvalue:this.defvalue()};return a},onchange:function(a,b,c){return this.on("change",a,b,c)},ondeclaredchange:function(a){return this.onchange(null,d.declaredHandlerName,a)},offchange:function(a){this.off("change",a)},offdeclaredchange:function(){return this.offchange(d.declaredHandlerName)},toString:function(){return'[Svidget.ActionParam { name: "'+this.name()+'" }]'}},d.ActionParam.eventTypes=["change"],d.ActionParam.optionProperties=["type","subtype","typedata","description","defvalue"],d.ActionParam.allProxyProperties=["name","type","subtype","typedata","description","defvalue"],d.ActionParam.writableProxyProperties=[],d.extend(d.ActionParam,d.ObjectPrototype),d.extend(d.ActionParam,d.ParamPrototype),d.extend(d.ActionParam,new d.EventPrototype(d.ActionParam.eventTypes)),d.ActionParamCollection=function(a,b){d.ObjectCollection.apply(this,[a,d.ActionParam]),this.__type="Svidget.ActionParamCollection";this.parent=b,this._ctor=d.ActionParamCollection},d.ActionParamCollection.prototype=new d.ObjectCollection,d.extend(d.ActionParamCollection,{create:function(a,b,c){if(null==a)return null;if(null!=this.getByName(a))return null;var e=new d.ActionParam(a,b,c);return e}},!0),d.EventDesc=function(a,b,c){this.__type="Svidget.EventDesc",b=b||{},c=c instanceof d.Widget?c:null;var e=this,f=d.Conversion,g=new function(){this.writable=["description","enabled","external"],this.name=f.toString(a),this.description=f.toString(b.description),this.external=null!=b.external?f.toBool(b.external):!0,this.enabled=null!=b.enabled?f.toBool(b.enabled):!0,this.eventName="trigger",this.eventContainer=new d.EventContainer([this.eventName],e),this.parent=c};this.setup(g),g.eventContainer.registerBubbleCallback(d.EventDesc.eventTypes,c,c.eventBubble)},d.EventDesc.prototype={name:function(a){if(void 0!==a)return!1;var b=this.getPrivate("name");return b},attached:function(){this.parent();return null!=this.parent&&this.parent instanceof d.Widget},parent:function(){var a=this.getPrivate("parent");return a},enabled:function(a){null===a&&(a=!0);var b=this.getset("enabled",a,"bool");return void 0!==a&&b?(a=this.getset("enabled"),this.trigger("change",{property:"enabled",value:a}),!0):b},description:function(a){var b=this.getset("description",a,"string");return void 0!==a&&b?(a=this.getPrivate("description"),this.trigger("change",{property:"description",value:a}),!0):b},external:function(a){null===a&&(a=!0);var b=this.getset("external",a,"bool");return void 0!==a&&b?(a=this.getPrivate("external"),this.trigger("change",{property:"external",value:a}),!0):b},eventName:function(){return this.getPrivate("eventName")},eventContainer:function(){return this.getset("eventContainer")},on:function(a,b,c,e){d.isFunction(a)&&(e=a,a=this.eventName()),this.eventContainer().on(a,b,c,e)},ontrigger:function(a,b,c){this.eventContainer().on(this.eventName(),a,b,c)},ondeclaredtrigger:function(a){return this.ontrigger(null,d.declaredHandlerName,a)},off:function(a,b){d.isFunction(a)&&(b=a,a=this.eventName()),this.eventContainer().off(a,b)},offtrigger:function(a){this.eventContainer().off(this.eventName(),a)},offdeclaredtrigger:function(){return this.offtrigger(d.declaredHandlerName)},onchange:function(a,b,c){return this.on("change",a,b,c)},ondeclaredchange:function(a){return this.onchange(null,d.declaredHandlerName,a)},offchange:function(a){this.off("change",a)},offdeclaredchange:function(){return this.offchange(d.declaredHandlerName)},trigger:function(a,b){this.enabled()&&(void 0===b&&(b=a,a=this.eventName()),this.eventContainer().trigger(a,b))},triggerEvent:function(a){this.trigger(this.eventName(),a)},toTransport:function(){var a={name:this.name(),description:this.description(),external:this.external(),enabled:this.enabled()};return a},toString:function(){return'[Svidget.EventDesc { name: "'+this.name()+'" }]'}},d.EventDesc.eventTypes=["trigger","change"],d.EventDesc.optionProperties=["external","enabled","description"],d.EventDesc.allProxyProperties=["name","external","enabled","description","eventContainer"],d.EventDesc.writableProxyProperties=[],d.extend(d.EventDesc,d.ObjectPrototype),d.EventDescCollection=function(a,b){d.ObjectCollection.apply(this,[a,d.EventDesc]),this.__type="Svidget.EventDescCollection";this.parent=b,this._ctor=d.EventDescCollection},d.EventDescCollection.prototype=new d.ObjectCollection,d.extend(d.EventDescCollection,{create:function(a,b,c){if(null==a)return null;if(null!=this.getByName(a))return null;var e=new d.EventDesc(a,b,c);return e}},!0),d.Param=function(a,b,c,e){function f(a,b,c){return b=null!=b?b:c,a=null==a?d.getType(b):d.resolveType(a)}function g(a,b,c,e){return d.convert(a,b,c,e)}this.__type="Svidget.Param",c=c||{},e=e instanceof d.Widget?e:null;var h=d.Conversion,i=new function(){this.writable=["shortname","binding","enabled","type","subtype","value","description","defvalue","typedata","coerce","group"],this.name=h.toString(a),this.shortname=h.toString(c.shortname),this.description=h.toString(c.description),this.enabled=null!=c.enabled?h.toBool(c.enabled):!0,this.type=f(c.type,b,c.defvalue),this.subtype=h.toString(c.subtype),this.typedata=h.toString(c.typedata),this.coerce=h.toBool(c.coerce),this.group=h.toString(c.group),this.value=this.coerce?g(b,this.type,this.subtype,this.typedata):b,this.defvalue=c.defvalue,this.sanitizer=(d.isFunction(c.sanitizer)?c.sanitizer:h.toString(c.sanitizer))||null,this.parent=e,this.binding=h.toString(c.binding),this.bindingQuery=null};this.setup(i),i.bindingQuery=d.DOM.select(i.binding),i.sanitizerFunc=d.findFunction(i.sanitizer),this.valuePopulated=!1,this.registerBubbleCallback(d.Param.eventTypes,e,e.paramBubble)},d.Param.prototype={attached:function(){this.parent();return null!=this.parent&&this.parent instanceof d.Widget},parent:function(){var a=this.getPrivate("parent");return a},shortname:function(a){var b=this.getset("shortname",a,"string");return void 0!==a&&b?(a=this.getPrivate("shortname"),this.trigger("change",{property:"shortname",value:a}),!0):b},group:function(a){var b=this.getset("group",a,"string");return void 0!==a&&b?(a=this.getPrivate("group"),this.trigger("change",{property:"group",value:a}),!0):b},enabled:function(a){null===a&&(a=!0);var b=this.getset("enabled",a,"bool");return void 0!==a&&b?(a=this.getset("enabled"),this.trigger("change",{property:"enabled",value:a}),!0):b},value:function(a){if(!this.enabled()&&void 0!==a)return!1;var b=this.getset("value",a,null,this.validateValue);if(void 0===a||!b)return b;var c=a;return this.getset("coerce")===!0&&(c=this.coerceValue(c)),c=this.applySanitizer(c),this.setPrivate("value",c),this.applyBinding(c),this.trigger("valuechange",{value:c}),this.trigger("set",{value:c}),!0},serializedValue:function(){var a=this.value();return d.Conversion.toString(a)},coerce:function(a){var b=this.getset("coerce",a,"bool");return void 0!==a&&b?(a=this.getset("coerce"),this.trigger("change",{property:"coerce",value:a}),!0):b},binding:function(a){var b=this.getset("binding",a,"string");return void 0!==a&&b?(a=this.getset("binding"),this.getset("bindingQuery",d.DOM.select(a)),this.trigger("change",{property:"binding",value:a}),!0):b},bindingQuery:function(){return this.getset("bindingQuery")},sanitizer:function(a){if(void 0!==a){"function"!=typeof a&&(a+="");var b=d.findFunction(a);this.getset("sanitizerFunc",b)}var c=this.getset("sanitizer",a);return void 0!==bind&&c?(this.trigger("change",{property:"sanitizer",value:val}),!0):c},sanitizerFunc:function(){var a=this.getset("sanitizer"),b=d.findFunction(a);return b},applySanitizer:function(a){var b=this.sanitizerFunc();if(!b)return a;var c=b.call(null,this,a);return void 0===c?a:c},validateValue:function(){return!0},coerceValue:function(a){return d.convert(a,this.type(),this.subtype(),this.typedata())},applyBinding:function(a){var b=this.bindingQuery();null!=b&&b.setValue(a)},onchange:function(a,b,c){return this.on("change",a,b,c)},ondeclaredchange:function(a){return this.onchange(null,d.declaredHandlerName,a)},offchange:function(a){this.off("change",a)},offdeclaredchange:function(){return this.offchange(d.declaredHandlerName)},onset:function(a,b,c){return this.on("set",a,b,c)},ondeclaredset:function(a){return this.onset(null,d.declaredHandlerName,a)},offset:function(a){return this.off("set",a)},offdeclaredset:function(){return this.offset(d.declaredHandlerName)},toTransport:function(){var a={name:this.name(),shortname:this.shortname(),enabled:this.enabled(),type:this.type(),subtype:this.subtype(),typedata:this.typedata(),coerce:this.coerce(),defvalue:this.defvalue(),value:this.value()};return a},toString:function(){return'[Svidget.Param { name: "'+this.name()+'" }]'}},d.Param.eventTypes=["change","set"],d.Param.optionProperties=["type","subtype","binding","sanitizer","enabled","shortname","defvalue","typedata","coerce","group"],d.Param.allProxyProperties=["name","value","type","subtype","enabled","shortname","defvalue","typedata","coerce","group"],d.Param.writableProxyProperties=["value"],d.extend(d.Param,d.ObjectPrototype),d.extend(d.Param,d.ParamPrototype),d.extend(d.Param,new d.EventPrototype(d.Param.eventTypes)),d.ParamCollection=function(a,b){d.ObjectCollection.apply(this,[a,d.Param]),this.__type="Svidget.ParamCollection";this.parent=b,this._ctor=d.ParamCollection},d.ParamCollection.prototype=new d.ObjectCollection,d.extend(d.ParamCollection,{create:function(a,b,c,e){if(null==a)return null;if(null!=this.getByName(a))return null;var f=new d.Param(a,b,c,e);return f}},!0),d.Widget=function(){this.__type="Svidget.Widget";var a=this,b=new function(){this.writable=["id","enabled","started","connected","populatedFromPage"],this.params=new d.ParamCollection([],a),this.actions=new d.ActionCollection([],a),this.events=new d.EventDescCollection([],a),this.enabled=!0,this.connected=!1,this.started=!1,this.populatedFromPage=!1,this.id=null,this.page=null,this.parentElement=null};this.setup(b),this.wireCollectionAddRemoveHandlers(b.params,a.paramAdded,a.paramRemoved),this.wireCollectionAddRemoveHandlers(b.actions,a.actionAdded,a.actionRemoved),this.wireCollectionAddRemoveHandlers(b.events,a.eventAdded,a.eventRemoved),this._init()},d.Widget.prototype={_init:function(){},id:function(){return this.getset("id")},enabled:function(a){null===a&&(a=!0);var b=this.getset("enabled",a,"bool");return void 0!==a&&b?(a=this.getset("enabled"),this.trigger("change",{property:"enabled",value:a}),!0):b},connected:function(){return this.getset("connected")},started:function(){var a=this.getset("started");return a},populatedFromPage:function(){return this.getset("populatedFromPage")},start:function(){this.getset("started",!0)},connect:function(a){this.connected()||(this.getset("id",a),this.getset("connected",!0))},setPopulatedFromPage:function(){this.getset("populatedFromPage",!0),this.trigger("pagepopulate",this)},updateParentElement:function(){},params:function(a){var b=this.getset("params");return this.select(b,a)},param:function(a){var b=this.getset("params"),c=this.selectFirst(b,a);return c},newParam:function(a,b,c){return new d.Param(a,b,c,this)},addParam:function(a,b,c){return this.params().add(a,b,c,this)},removeParam:function(a){return this.params().remove(a)},removeAllParams:function(){return this.params().clear()},paramAdded:function(a){d.log("widget: param added: "+a.name()),this.trigger("paramadd",a),d.root.signalParamAdded(a)},paramRemoved:function(a){d.log("widget: param removed: "+a.name()),this.trigger("paramremove",a.name()),d.root.signalParamRemoved(a.name())},paramBubble:function(a,b,c){"change"==a&&this.paramChanged(c,b.value),("valuechange"==a||"set"==a)&&this.paramSet(c,b.value)},paramChanged:function(a,b){this.trigger("paramchange",b,a),d.root.signalParamChanged(a,b)},paramSet:function(a,b){this.trigger("paramset",b,a),this.trigger("paramvaluechange",b,a),d.root.signalParamSet(a,b)},actions:function(a){var b=this.getset("actions");return this.select(b,a)},action:function(a){var b=this.getset("actions"),c=this.selectFirst(b,a);return c},newAction:function(a,b){return new d.Action(a,b,this)},addAction:function(a,b){var c=this.actions().add(a,b,this);if(null==c)return c;if(null==b||null==b.params||!d.isArray(b.params))return c;for(var e=0;e<b.params.length;e++){var f=b.params[e];null!=f&&null!=f.name&&c.addParam(f.name,f)}},removeAction:function(a){return this.actions().remove(a)},removeAllActions:function(){return this.actions().clear()},actionAdded:function(a){d.log("widget: action added: "+a.name()),this.trigger("actionadd",a),d.root.signalActionAdded(a)},actionRemoved:function(a){d.log("widget: action removed: "+a.name()),this.trigger("actionremove",a.name()),d.root.signalActionRemoved(a.name())},actionBubble:function(a,b,c){"invoke"==a&&this.actionInvoked(c,b.value),"change"==a&&this.actionChanged(c,b.value),"paramchange"==a&&this.actionParamChanged(c,b.target,b.value),"paramadd"==a&&this.actionParamAdded(c,b.value),"paramremove"==a&&this.actionParamRemoved(c,b.value)},actionInvoked:function(a,b){this.trigger("actioninvoke",b,a),d.root.signalActionInvoked(a,b)},actionChanged:function(a,b){this.trigger("actionchange",b,a),d.root.signalActionChanged(a,b)},actionParamChanged:function(a,b,c){this.trigger("actionparamchange",c,b),d.root.signalActionParamChanged(b,a,c)},actionParamAdded:function(a,b){this.trigger("actionparamadd",b,a),d.root.signalActionParamAdded(b,a.name())},actionParamRemoved:function(a,b){this.trigger("actionparamremove",b,a),d.root.signalActionParamRemoved(b,a.name())},events:function(a){var b=this.getset("events");return this.select(b,a)},event:function(a){var b=this.getset("events"),c=this.selectFirst(b,a);return c},newEvent:function(a,b){return new d.EventDesc(a,b,this)},addEvent:function(a,b){return this.events().add(a,b,this)},removeEvent:function(a){return this.events().remove(a)},removeAllEvents:function(){return this.events().clear()},eventAdded:function(a){d.log("widget: event added: "+a.name()),this.trigger("eventadd",a),d.root.signalEventAdded(a)},eventRemoved:function(a){d.log("widget: event removed: "+a.name()),this.trigger("eventremove",a.name()),d.root.signalEventRemoved(a.name())},eventBubble:function(a,b,c){"trigger"==a&&this.eventTrigger(c,b),"change"==a&&this.eventChanged(c,b.value)},eventTrigger:function(a,b){d.log("widget: event trigger: "+a.name()),this.trigger("eventtrigger",b.value,a),d.root.signalEventTriggered(b.target,b.value)},eventChanged:function(a,b){this.trigger("eventchange",b,a),d.root.signalEventChanged(a,b)},toTransport:function(){var a={id:this.id(),enabled:this.enabled(),params:this.toParamsTransport(),actions:this.toActionsTransport(),events:this.toEventsTransport()};return a},toParamsTransport:function(){var a=this.params(),b=a.select(function(a){return a.toTransport()}).toArray();return b},toActionsTransport:function(){var a=this.actions(),b=a.select(function(a){return a.toTransport()}).toArray();return b},toEventsTransport:function(){var a=this.events(),b=a.select(function(a){return a.toTransport()}).toArray();return b},onchange:function(a,b,c){return this.on("change",a,b,c)},ondeclaredchange:function(a){return this.onchange(null,d.declaredHandlerName,a)},offchange:function(a){this.off("change",a)},offdeclaredchange:function(){return this.offchange(d.declaredHandlerName)},onparamadd:function(a,b,c){return this.on("paramadd",a,b,c)},ondeclaredparamadd:function(a){return this.onparamadd(null,d.declaredHandlerName,a)},offparamadd:function(a){return this.off("paramadd",a)},offdeclaredparamadd:function(){return this.offparamadd(d.declaredHandlerName)},onparamremove:function(a,b,c){return this.on("paramremove",a,b,c)},ondeclaredparamremove:function(a){return this.onparamremove(null,d.declaredHandlerName,a)},offparamremove:function(a){return this.off("paramremove",a)},offdeclaredparamremove:function(){return this.offparamremove(d.declaredHandlerName)},onparamchange:function(a,b,c){return this.on("paramchange",a,b,c)},offparamchange:function(a){return this.off("paramchange",a)},onparamset:function(a,b,c){return this.on("paramset",a,b,c)},offparamset:function(a){return this.off("paramset",a)},onactionadd:function(a,b,c){return this.on("actionadd",a,b,c)},ondeclaredactionadd:function(a){return this.onactionadd(null,d.declaredHandlerName,a)},offactionadd:function(a){return this.off("actionadd",a)},offdeclaredactionadd:function(){return this.offactionadd(d.declaredHandlerName)},onactionremove:function(a,b,c){return this.on("actionremove",a,b,c)},ondeclaredactionremove:function(a){return this.onactionremove(null,d.declaredHandlerName,a)},offactionremove:function(a){return this.off("actionremove",a)},offdeclaredactionremove:function(){return this.offactionremove(d.declaredHandlerName)},onactionchange:function(a,b,c){return this.on("actionchange",a,b,c)},offactionchange:function(a){return this.off("actionchange",a)},onactioninvoke:function(a,b,c){return this.on("actioninvoke",a,b,c)},offactioninvoke:function(a){return this.off("actioninvoke",a)},onactionparamadd:function(a,b,c){return this.on("actionparamadd",a,b,c)},offactionparamadd:function(a){return this.off("actionparamadd",a)},onactionparamremove:function(a,b,c){return this.on("actionparamremove",a,b,c)},offactionparamremove:function(a){return this.off("actionparamremove",a)},onactionparamchange:function(a,b,c){return this.on("actionparamchange",a,b,c)},offactionparamchange:function(a){return this.off("actionparamchange",a)},oneventadd:function(a,b,c){return this.on("eventadd",a,b,c)},ondeclaredeventadd:function(a){return this.oneventadd(null,d.declaredHandlerName,a)},offeventadd:function(a){return this.off("eventadd",a)},offdeclaredeventadd:function(){return this.offeventadd(d.declaredHandlerName)},oneventremove:function(a,b,c){return this.on("eventremove",a,b,c)},ondeclaredeventremove:function(a){return this.oneventremove(null,d.declaredHandlerName,a)},offeventremove:function(a){return this.off("eventremove",a)},offdeclaredeventremove:function(){return this.offeventremove(d.declaredHandlerName)},oneventchange:function(a,b,c){return this.on("eventchange",a,b,c)},offeventchange:function(a){return this.off("eventchange",a)},oneventtrigger:function(a,b,c){return this.on("eventtrigger",a,b,c)},offeventtrigger:function(a){return this.off("eventtrigger",a)},onpagepopulate:function(a,b,c){return this.on("pagepopulate",a,b,c)},offpagepopulate:function(a){return this.off("pagepopulate",a)},toString:function(){return'[Svidget.Widget { id: "'+this.id()+'" }]'}},d.Widget.eventTypes=["change","pagepopulate","paramvaluechange","paramset","paramchange","paramadd","paramremove","actioninvoke","actionchange","actionadd","actionremove","eventtrigger","eventchange","eventadd","eventremove"],d.extend(d.Widget,d.ObjectPrototype),d.extend(d.Widget,new d.EventPrototype(d.Widget.eventTypes)),d.Proxy=function(a,b,c,e,f){function g(a){return function(b){return this.getsetProp(a,b)}}this.__type="Svidget.Proxy";var h=this;b=b||{};var i=new d.Collection(d.isArray(c)?c:null),j=new d.Collection(d.isArray(e)?e:null);j=j.where(function(a){return i.contains(a)});var k={writable:j.toArray(),propertyChangeFuncs:new d.Collection,eventContainer:new d.EventContainer(f,h),parent:a,connected:null==b.connected?!0:!!b.connected};this.setup(k);for(var l in b)void 0===k[l]&&(k[l]=b[l]);for(var m=0;m<i.length;m++){var n=i[m]+"";n.length>0&&(this[n]=g(n))}},d.Proxy.prototype={parent:function(){var a=this.getPrivate("parent");return a},attached:function(){var a=this.parent();return null!=a},propertyChangeFuncs:function(){return this.getPrivate("propertyChangeFuncs")},connected:function(){return this.getPrivate("connected")},getsetProp:function(a,b){var c=this.getset(a,b);return void 0!==b&&c?(this.handlePropertyChange(a,b),!0):c},handlePropertyChange:function(){},triggerPropertyChange:function(a,b){var c=this.propertyChangeFuncs(),d=this;c.each(function(c){c(d,a,b)})},notifyPropertyChange:function(a,b){null!=a&&(this.getset(a,b),this.triggerFromWidget("change",{property:a,value:b},this))},refreshProperties:function(a){for(var b in a){var c=this.getPrivate(b);null!=c&&this.setPrivate(b,a[b])}},connect:function(){this.setPrivate("connected",!0)},onPropertyChange:function(a){var b=this.propertyChangeFuncs();return b.add(a),!0},offPropertyChange:function(a){var b=this.propertyChangeFuncs();return b.remove(a)},eventContainer:function(){return this.getPrivate("eventContainer")},on:function(a,b,c,d){this.eventContainer().on(a,b,c,d)},off:function(a,b){this.eventContainer().off(a,b)},triggerFromWidget:function(a,b,c){this.eventContainer().trigger(a,b,c)},registerBubbleCallback:function(a,b,c){this.eventContainer().registerBubbleCallback(a,b,c)}},d.extend(d.Proxy,d.ObjectPrototype),d.ActionProxy=function(a,b,c){var e=this,f={name:a,params:new d.ActionParamProxyCollection([],e)};b=b||{};for(var g in b)void 0===f[g]&&(f[g]=b[g]);c&&(c=c instanceof d.WidgetReference?c:null),d.Proxy.apply(this,[c,f,d.Action.allProxyProperties,d.Action.writableProxyProperties]),this.__type="Svidget.ActionProxy",this.registerBubbleCallback(d.Action.eventTypes,c,c.actionProxyBubble),this.wireCollectionAddRemoveHandlers(f.params,e.paramAdded,e.paramRemoved)},d.ActionProxy.prototype=new d.Proxy,d.extend(d.ActionProxy,{invoke:function(){if(!this.canInvoke())return!1;var a=d.array(arguments);return svidget.signalActionInvoke(this.parent(),this,a),!0},canInvoke:function(){return this.getset("external")},invokeFromWidget:function(a){this.triggerFromWidget("invoke",{returnValue:a},this)},params:function(a){var b=this.getset("params");return this.select(b,a)},param:function(a){var b=this.getset("params"),c=this.selectFirst(b,a);return c},addParam:function(a,b){return this.params().add(a,b,this)},removeParam:function(a){return this.params().remove(a)},paramProxyBubble:function(a,b,c){"change"==a&&this.paramChanged(c,b.value)},paramChanged:function(a,b){this.triggerFromWidget("paramchange",b,a)},paramAdded:function(a){this.triggerFromWidget("paramadd",a)},paramRemoved:function(a){this.triggerFromWidget("paramremove",a.name())},onchange:function(a,b,c){return this.on("change",a,b,c)},offchange:function(a){this.off("change",a)},oninvoke:function(a,b,c){return this.on("invoke",a,b,c)},offinvoke:function(a){return this.off("invoke",a)},onparamadd:function(a,b,c){return this.on("paramadd",a,b,c)},offparamadd:function(a){return this.off("paramadd",a)},onparamchange:function(a,b,c){return this.on("paramchange",a,b,c)},offparamchange:function(a){return this.off("paramchange",a)},onparamremove:function(a,b,c){return this.on("paramremove",a,b,c)},offparamremove:function(a){return this.off("paramremove",a)},toString:function(){return'[Svidget.ActionProxy { name: "'+this.name+'" }]'}},!0),d.ActionProxyCollection=function(a,b){d.ObjectCollection.apply(this,[a,d.ActionProxy]),this.__type="Svidget.ActionProxyCollection";this.parent=b,this._ctor=d.ActionProxyCollection},d.ActionProxyCollection.prototype=new d.ObjectCollection,d.extend(d.ActionProxyCollection,{create:function(a,b,c){if(null==a)return null;if(null!=this.getByName(a))return null;var e=new d.ActionProxy(a,b,c);return e}},!0),d.ActionParamProxy=function(a,b,c){var e={name:a};b=b||{};for(var f in b)void 0===e[f]&&(e[f]=b[f]);c&&(c=c instanceof d.ActionProxy?c:null),d.Proxy.apply(this,[c,e,d.ActionParam.allProxyProperties,d.ActionParam.writableProxyProperties]),this.__type="Svidget.ActionParamProxy",this.registerBubbleCallback(d.ActionParam.eventTypes,c,c.paramProxyBubble)},d.ActionParamProxy.prototype=new d.Proxy,d.extend(d.ActionParamProxy,{toString:function(){return'[Svidget.ActionParamProxy { name: "'+this.name()+'" }]'}},!0),d.ActionParamProxyCollection=function(a,b){d.ObjectCollection.apply(this,[a,d.ActionParamProxy]),this.__type="Svidget.ActionParamProxyCollection";this.parent=b,this._ctor=d.ActionParamProxyCollection},d.ActionParamProxyCollection.prototype=new d.ObjectCollection,d.extend(d.ActionParamProxyCollection,{create:function(a,b,c){if(null==a)return null;if(null!=this.getByName(a))return null;var e=new d.ActionParamProxy(a,b,c);return e}},!0),d.EventDescProxy=function(a,b,c){var e="trigger",f={name:a,eventName:e};b=b||{};for(var g in b)void 0===f[g]&&(f[g]=b[g]);c&&(c=c instanceof d.WidgetReference?c:null),d.Proxy.apply(this,[c,f,d.EventDesc.allProxyProperties,d.EventDesc.writableProxyProperties]),this.__type="Svidget.EventDescProxy",this.registerBubbleCallback(d.EventDesc.eventTypes,c,c.eventProxyBubble)},d.EventDescProxy.prototype=new d.Proxy,d.extend(d.EventDescProxy,{triggerEventName:function(){return this.getPrivate("eventName")},on:function(a,b,c,e){d.isFunction(a)&&(e=a,a=this.triggerEventName()),this.eventContainer().on(a,b,c,e)},ontrigger:function(a,b,c){this.eventContainer().on(this.triggerEventName(),a,b,c)},off:function(a,b){d.isFunction(a)&&(b=a,a=this.triggerEventName()),this.eventContainer().off(a,b)},offtrigger:function(a){this.eventContainer().off(this.triggerEventName(),a)},onchange:function(a,b,c){return this.on("change",a,b,c)},offchange:function(a){this.off("change",a)},trigger:function(a){return this.canTrigger()?(svidget.signalEventTrigger(this.parent(),this,a),!0):!1},canTrigger:function(){return this.getset("external")},triggerEventFromWidget:function(a){this.eventContainer().trigger(this.triggerEventName(),a)},toString:function(){return'[Svidget.EventDescProxy { name: "'+this.name+'" }]'}},!0),d.EventDescProxyCollection=function(a,b){d.ObjectCollection.apply(this,[a,d.EventDescProxy]),this.__type="Svidget.EventDescProxyCollection";this.parent=b,this._ctor=d.EventDescProxyCollection},d.EventDescProxyCollection.prototype=new d.ObjectCollection,d.extend(d.EventDescProxyCollection,{create:function(a,b,c){if(null==a)return null;if(null!=this.getByName(a))return null;var e=new d.EventDescProxy(a,b,c);return e}},!0),d.ParamProxy=function(a,b,c,e){var f={name:a,value:b};c=c||{};for(var g in c)f[g]=c[g];e&&(e=e instanceof d.WidgetReference?e:null),d.Proxy.apply(this,[e,f,d.Param.allProxyProperties,d.Param.writableProxyProperties]),this.__type="Svidget.ParamProxy",this.registerBubbleCallback(d.Param.eventTypes,e,e.paramProxyBubble)},d.ParamProxy.prototype=new d.Proxy,d.extend(d.ParamProxy,{handlePropertyChange:function(a,b){"value"==a&&(this.parent().updateParamValue(this.name(),b),svidget.signalPropertyChange(this.parent(),this,"param",a,b))},notifyValueChange:function(a){this.getset("value",a),this.triggerFromWidget("valuechange",{value:a},this),this.triggerFromWidget("set",{value:a},this)},serializedValue:function(){var a=this.value();return d.Conversion.toString(a)},onchange:function(a,b,c){return this.on("change",a,b,c)},offchange:function(a){this.off("change",a)},onset:function(a,b,c){return this.on("set",a,b,c)},offset:function(a){return this.off("set",a)},toString:function(){return'[Svidget.ParamProxy { name: "'+this.name+'" }]'}},!0),d.ParamProxyCollection=function(a,b){d.ObjectCollection.apply(this,[a,d.ParamProxy]),this.__type="Svidget.ParamProxyCollection";this.parent=b,this._ctor=d.ParamProxyCollection},d.ParamProxyCollection.prototype=new d.ObjectCollection,d.extend(d.ParamProxyCollection,{create:function(a,b,c,e){if(null==a)return null;if(null!=this.getByName(a))return null;var f=new d.ParamProxy(a,b,c,e);return f}},!0),d.WidgetReference=function(a,b,c,e,f,g){function h(a){if(null!=a)for(var b in a)this.addParamProxy(b,a[b],{connected:!1})}this.__type="Svidget.WidgetReference";var i=this,j=new function(){this.writable=["enabled","started","populated","paramValues"],this.params=new d.ParamProxyCollection([],i),this.actions=new d.ActionProxyCollection([],i),this.events=new d.EventDescProxyCollection([],i),this.eventContainer=new d.EventContainer(d.Widget.eventTypes,i),this.paramValues=b,this.enabled=!0,this.started=!1,this.populated=!1,this.connected=!!f,this.crossdomain=!!g,this.state="declared",this.id=a,this.element=e,this.declaringElement=c,this.url=c.getAttribute("data")};this.setup(j),this.setElement=function(a){return null!=j.element?!1:d.DOM.isElement(a)?(j.element=a,void(this.setElement=null)):!1},h.call(i,b),c.widgetReference=this,this.wireCollectionAddRemoveHandlers(j.params,i.paramProxyAdded,i.paramProxyRemoved),this.wireCollectionAddRemoveHandlers(j.actions,i.actionProxyAdded,i.actionProxyRemoved),this.wireCollectionAddRemoveHandlers(j.events,i.eventProxyAdded,i.eventProxyRemoved)},d.WidgetReference.prototype={id:function(){var a=this.getset("id");return a},name:function(){return this.id()},enabled:function(){var a=this.getset("enabled");return a},url:function(){var a=this.getset("url");return a},element:function(){var a=this.getset("element");return a},declaringElement:function(){var a=this.getset("declaringElement");return a},root:function(){if(this.isCrossDomain())return null;var a=this.document(),b=a.parentWindow||a.defaultView;return b.svidget},window:function(){var a=this.element();return null==a?null:a.contentWindow},document:function(){var a=this.element();return d.DOM.getDocument(a)},connected:function(a){var b=this.getset("connected",a);return void 0!==a&&b?!0:b},crossdomain:function(a){var b=this.getset("crossdomain",a);return void 0!==a&&b?!0:b},params:function(a){var b=this.getset("params");return this.select(b,a)},param:function(a){var b=this.getset("params"),c=this.selectFirst(b,a);return c},actions:function(a){var b=this.getset("actions");return this.select(b,a)},action:function(a){var b=this.getset("actions"),c=this.selectFirst(b,a);return c},events:function(a){var b=this.getset("events");return this.select(b,a)},event:function(a){var b=this.getset("events"),c=this.selectFirst(b,a);return c},paramValues:function(){var a=this.getset("paramValues");return a},addParamProxy:function(a,b,c){return this.params().add(a,b,c,this)},removeParamProxy:function(a){return this.params().remove(a)},refreshParamProxy:function(a,b,c){var d=this.param(a);return null==d?this.params().add(a,b,c,this):(d.refreshProperties(c),d)},updateParamValue:function(a,b){var c=this.getset("paramValues");c=c||{},c[a]=b,this.getset("paramValues",c)},paramProxyAdded:function(a){d.log("page: param proxy added: "+a.name()),this.triggerFromWidget("paramadd",a)},paramProxyRemoved:function(a){d.log("page: param proxy removed: "+a.name()),this.triggerFromWidget("paramremove",a.name())},paramProxyBubble:function(a,b,c){d.log("page: param proxy bubble: "+c.name()),"change"==a&&this.paramProxyChanged(c,b.value),"valuechange"==a&&this.paramProxyValueChanged(c,b.value)},paramProxyChanged:function(a,b){d.log("page: param proxy change: "+a.name()),this.triggerFromWidget("paramchange",b,a)},paramProxyValueChanged:function(a,b){d.log("page: param proxy value change: "+a.name()),this.triggerFromWidget("paramvaluechange",b,a)},addActionProxy:function(a,b){return this.actions().add(a,b,this)},removeActionProxy:function(a){return this.actions().remove(a)},actionProxyAdded:function(a){d.log("page: action proxy added: "+a.name()),this.triggerFromWidget("actionadd",a)},actionProxyRemoved:function(a){d.log("page: action proxy removed: "+a.name()),this.triggerFromWidget("actionremove",a.name())},actionProxyBubble:function(a,b,c){d.log("page: action proxy bubble: "+c.name()),"invoke"==a&&this.actionProxyInvoked(c,b.value),"change"==a&&this.actionProxyChanged(c,b.value),"paramchange"==a&&this.actionParamProxyChanged(c,b.target,b.value),"paramadd"==a&&this.actionParamProxyAdded(c,b.value),"paramremove"==a&&this.actionParamProxyRemoved(c,b.value)
},actionProxyInvoked:function(a,b){this.triggerFromWidget("actioninvoke",b,a)},actionProxyChanged:function(a,b){this.triggerFromWidget("actionchange",b,a)},actionParamProxyAdded:function(a,b){this.triggerFromWidget("actionparamadd",b,a)},actionParamProxyRemoved:function(a,b){this.triggerFromWidget("actionparamremove",b,a)},actionParamProxyChanged:function(a,b,c){this.triggerFromWidget("actionparamchange",c,b)},addEventProxy:function(a,b){return this.events().add(a,b,this)},removeEventProxy:function(a){return this.events().remove(a)},eventProxyAdded:function(a){d.log("page: event proxy added: "+a.name()),this.triggerFromWidget("eventadd",a)},eventProxyRemoved:function(a){d.log("page: event proxy removed: "+a.name()),this.triggerFromWidget("eventremove",a.name())},eventProxyBubble:function(a,b,c){d.log("page: event proxy bubble: "+c.name()),"trigger"==a&&this.eventProxyTriggered(c,b),"change"==a&&this.eventProxyChanged(c,b.value)},eventProxyTriggered:function(a,b){d.log("page: event proxy trigger: "+a.name()),this.triggerFromWidget("eventtrigger",b.value,a)},eventProxyChanged:function(a,b){d.log("page: event proxy change: "+a.name()),this.triggerFromWidget("eventchange",b,a)},eventContainer:function(){return this.getPrivate("eventContainer")},on:function(a,b,c,d){this.eventContainer().on(a,b,c,d)},off:function(a,b){this.eventContainer().off(a,b)},triggerFromWidget:function(a,b,c){this.eventContainer().trigger(a,b,c)},hasElement:function(){return null!=this.element()},isAttached:function(){var a=this.element();return null!=a&&null!=a.parentNode},isCrossDomain:function(){return this.element()!==this.declaringElement()},started:function(){var a=this.getset("started");return a},populated:function(){var a=this.getset("populated");return a},start:function(){this.getset("started",!0)},populate:function(a){this.populated()||(this.enabled(a.enabled),this._populateParams(a.params),this._populateActions(a.actions),this._populateEvents(a.events),this.getset("populated",!0))},_populateParams:function(a){if(a&&d.isArray(a))for(var b=0;b<a.length;b++){var c=a[b],e=this.refreshParamProxy(c.name,c.value,c);e.connect()}},_populateActions:function(a){if(a&&d.isArray(a))for(var b=0;b<a.length;b++){var c=a[b],e=this.addActionProxy(c.name,c);this._populateActionParams(c.params,e)}},_populateActionParams:function(a,b){if(a&&d.isArray(a))for(var c=0;c<a.length;c++){var e=a[c];b.addParam(e.name,e)}},_populateEvents:function(a){if(a&&d.isArray(a))for(var b=0;b<a.length;b++){var c=a[b];this.addEventProxy(c.name,c)}}},d.extend(d.WidgetReference,d.ObjectPrototype),d.Root.PagePrototype={initInternal:function(){this.idSeed=1,e._svidget="page",this.connected(!0),Object.defineProperty(this,"$",d.readOnlyProperty(null))},readyPage:function(){d.log("page: readyPage"),this.loadPageWidgets()},loadPageWidgets:function(){var a=this,b=this.findAllWidgetElements();b.each(function(b){a.loadPageWidget(b)})},loadPageWidget:function(a,b){if(null==a.widgetReference&&!a.svidgetLoad){var c=this.createWidgetReference(a,b);return this.addWidget(c),this.readyWidgetReference(c,a),c}},createWidgetReference:function(a,b){var c;c=void 0===b?this.parseParamElements(a):b;var e=!a.hasAttribute("data-connected")||this.isAttrEmptyOrTrue(a,"data-connected"),f=this.isAttrEmptyOrTrue(a,"data-crossdomain")||""==a.data;this.setElementPosition(a,a.getAttribute("data-x"),a.getAttribute("data-y"));var g=this.getWidgetIDForElement(a),h=this.resolveCoreWidgetElement(a,null,f),i=new d.WidgetReference(g,c,a,h,e,f);return a._widget=i,i},isAttrEmptyOrTrue:function(a,b){return d.DOM.isAttrEmpty(a,b)?!0:d.Conversion.toBool(d.DOM.attrValue(a,b))},readyWidgetReference:function(a,b){var c=a.element()||b;this.addWidgetLoadEvents(c,a)},addWidgetLoadEvents:function(a,b){d.log("page: addWidgetLoadEvents: id = "+a.id+", tag = "+a.tagName);var c=d.wrap(this.finishPageWidget,this),e=function(){c(b)};b._waitingForDOM=!0,d.DOM.on(a,"load",e)},finishPageWidget:function(a){d.log("page: finishPageWidget: id = "+a.id()),a._waitingForDOM=!1;var b=this.ensureCoreElementResolved(a);null!=b&&b!=a.declaringElement()?this.readyWidgetReference(a,a.element()):this.ensureWidgetStarted(a)},ensureCoreElementResolved:function(a){if(a.hasElement())return null;var b=this.resolveCoreWidgetElement(a.declaringElement(),a,a.crossdomain());return null!=b?(d.log("page: CoreElementCreated: "+b.tagName+" id:"+a.id()),a.setElement(b),b):null},ensureWidgetStarted:function(a){a.hasElement()&&!a.started()&&d.DOM.isElementDocumentReady(a.element())&&this.signalStart(a,a.paramValues())},resolveCoreWidgetElement:function(a,b,c){var e=d.DOM.getDocument(a);if(null===e&&!c)return null;var f=null,g=a;return(void 0===e||c)&&(f=this.buildIFrameElement(a),a.parentNode.insertBefore(f,a),this.disableAndHide(a),g=f),g},waitForWidgets:function(){setTimeout(d.wrap(this.checkUnfinishedWidgetReferences,this),50)},checkUnfinishedWidgetReferences:function(){if(!this.allWidgetsStarted){d.log("page: checkUnfinishedWidgetReferences");var a=this,b=0;this.widgets().where(function(b){return a.needsFinishing(b)}).each(function(c){b++,a.finishPageWidget(c)}),this.waitForWidgets()}},needsFinishing:function(a){return a._waitingForDOM?!1:a.hasElement()&&a.started()||!d.DOM.isElementDocumentReady(a.declaringElement())?a.hasElement()&&a.isCrossDomain()&&!a.started()&&d.DOM.isElementDocumentReady(a.element())?!0:!1:!0},areAllWidgetsStarted:function(){return this.widgets().all(function(a){return a.started()})},disableAndHide:function(a){a.data="",d.DOM.disable(a),d.DOM.hide(a)},getWidgetIDForElement:function(a){var b=a.id;return null!=b&&d.DOM.get(b)==a?b:this.newWidgetID()},newWidgetID:function(){var a="_svidget_";void 0===this.idCounter&&(this.idCounter=1);for(var b,c=this.idCounter;;){var b=a+c;if(c++,null==d.DOM.get(b))break}return this.idCounter=c,b},buildIFrameElement:function(a){var b=f.createElement("iframe"),c=d.DOM.wrap(a);return c.attributes().each(function(a){"data"==a.name()||"data-url"==a.name()?b.setAttribute("src",a.value()):"id"==a.name()?b.setAttribute("id",a.value()+"_frame"):b.setAttribute(a.name(),a.value())}),b.frameBorder=0,b.seamless=!0,b},buildObjectElement:function(a,b){if(!f.createElement)return null;var c=f.createElement("object");c.setAttribute("role","svidget"),c.setAttribute("data-url",a.url),a.crossdomain!==!0&&c.setAttribute("data",a.url),a.id&&c.setAttribute("id",a.id),a.width&&c.setAttribute("width",a.width),a.height&&c.setAttribute("height",a.height),void 0!==a.connected&&c.setAttribute("data-connected",a.connected),a.crossdomain===!0&&c.setAttribute("data-crossdomain",a.crossdomain),a.style&&c.setAttribute("style",a.style),a.cssclass&&c.setAttribute("class",a.cssclass),void 0!==a.allowfullscreen&&c.setAttribute("allowfullscreen",a.allowfullscreen),a.title&&c.setAttribute("title",a.title),this.setElementPosition(c,a.x,a.y);for(var d in b){var e=f.createElement("param");e.setAttribute("name",d)}return c},createObjectElement:function(a,b,c){var d=this.buildObjectElement(b,c);return d.svidgetLoad=!0,a.appendChild(d),d},setElementPosition:function(a,b,c){var d=null!=b?parseFloat(b):0/0,e=null!=c?parseFloat(c):0/0;if(!isNaN(d)||!isNaN(e)){var f=a.style.position;"absolute"!=f&&"fixed"!=f&&(a.style.position="absolute"),isNaN(d)||(a.style.left=d+"px"),isNaN(e)||(a.style.top=e+"px")}},populateWidgetReference:function(a,b){d.log("page: populateWidgetReference"),a.populated()||a.populate(b)},findAllWidgetElements:function(){var a=this,b=d.DOM.getByName("object",!0),c=b.where(function(b){return a.containsSvidgetRole(b)});return c},containsSvidgetRole:function(a){var b=d.DOM.attrValue(a,"role");return/(^|,)\s*svidget\s*(,|$)/.test(b)},parseParamElements:function(a){for(var b=d.DOM.getChildrenByName(a,"param",!0),c={},e=0;e<b.length;e++){var f=b[e].getAttribute("name");null!=f&&f.length>0&&(c[f]=b[e].getAttribute("value"))}return c},getWidget:function(a){if(null==a)return null;var b=this.widgets();return b.first(function(b){return b.id()===a})},addWidget:function(a){return this.widgets().contains(a)?!1:(this.widgets().add(a),!0)},load:function(a,b,c,e){var f=d.DOM.selectElement(a);if(null==f)return null;var g=null;if("string"==typeof b)g={url:b};else{if(null==b)return null;g=b}if(null!=g.url){this.allWidgetsStarted=!1;var h=this.createObjectElement(f,g,c);delete h.svidgetLoad;var i=this.loadPageWidget(h,c);return e&&"function"==typeof e&&setTimeout(function(){e(i)},0),i}},widgets:function(a){var b=this.getWidgets();return this.select(b,a)},widget:function(a){var b=this.getWidgets(),c=this.selectFirst(b,a);return c},getWidgets:function(){var a=this.getset("widgets");return null==a&&(a=new d.ObjectCollection(null,d.WidgetReference),this.getset("widgets",a)),a},triggerWidgetEvent:function(a,b,c){var d=a.event(b);null!=d&&d.triggerFromWidget(c)},receiveFromWidget:function(a,b,c){d.log("page: receiveFromWidget {name: "+a+", widgetID: "+c+"}");var e=this.getWidget(c);switch(a){case"paramadded":this.handleReceiveWidgetParamAdded(e,b);break;case"paramremoved":this.handleReceiveWidgetParamRemoved(e,b);break;case"paramchanged":this.handleReceiveWidgetParamChanged(e,b);break;case"paramset":this.handleReceiveWidgetParamSet(e,b);break;case"actionadded":this.handleReceiveWidgetActionAdded(e,b);break;case"actionremoved":this.handleReceiveWidgetActionRemoved(e,b);break;case"actionchanged":this.handleReceiveWidgetActionChanged(e,b);break;case"actioninvoked":this.handleReceiveWidgetActionInvoked(e,b);break;case"actionparamadded":this.handleReceiveWidgetActionParamAdded(e,b);break;case"actionparamremoved":this.handleReceiveWidgetActionParamRemoved(e,b);break;case"actionparamchanged":this.handleReceiveWidgetActionParamChanged(e,b);break;case"eventadded":this.handleReceiveWidgetEventAdded(e,b);break;case"eventremoved":this.handleReceiveWidgetEventRemoved(e,b);break;case"eventchanged":this.handleReceiveWidgetEventChanged(e,b);break;case"eventtriggered":this.handleReceiveWidgetEventTriggered(e,b);break;case"startack":this.handleReceiveWidgetStartAck(e,b)}},signalStart:function(a,b){d.log("page: signalStart {id: "+a.id()+", url: "+a.url()+", tag: "+a.element().tagName+"}");var c={id:a.id(),params:b,connected:a.connected()};this.comm().signalWidget(a,"start",c)},signalPropertyChange:function(a,b,c,e,f){if(a.started()&&a.connected()){d.log("page: signalPropertyChange {id: "+a.id()+", type: "+c+"}");var g={type:c,name:b.name(),propertyName:e,value:f};this.comm().signalWidget(a,"propertychange",g)}},signalActionInvoke:function(a,b,c){if(a.started()&&a.connected()){d.log("page: signalActionInvoke {id: "+a.id()+", url: "+a.url()+"}");var e={action:b.name(),args:c};this.comm().signalWidget(a,"actioninvoke",e)}},signalEventTrigger:function(a,b,c){if(a.started()&&a.connected()){d.log("page: signalEventTrigger {id: "+a.id()+"}");var e={event:b.name(),data:c};this.comm().signalWidget(a,"eventtrigger",e)}},handleReceiveWidgetInitialized:function(){d.log("page: handleReceiveWidgetInitialized")},handleReceiveWidgetLoaded:function(a,b){return null==a?void this.checkUnfinishedWidgetReferences():void this.populateWidgetReference(a,b)},handleReceiveWidgetStartAck:function(a,b){d.log("page: handleReceiveWidgetStartAck {widget: "+a.id()+"}"),a.started()||(a.start(),this.populateWidgetReference(a,b),this.triggerWidgetLoad(a.id()),this.areAllWidgetsStarted()&&(this.allWidgetsStarted=!0,this.markLoaded()))},handleReceiveWidgetParamAdded:function(a,b){d.log("page: handleReceiveWidgetParamAdded {param: "+b.name+"}"),a.addParamProxy(b.name,b)},handleReceiveWidgetParamRemoved:function(a,b){d.log("page: handleReceiveWidgetParamRemoved {param: "+b+"}"),a.removeParamProxy(b)},handleReceiveWidgetParamChanged:function(a,b){d.log("page: handleReceiveWidgetParamChanged {param: "+b.name+"}");var c=a.param(b.name);null!=c&&c.notifyPropertyChange(b.property,b.value)},handleReceiveWidgetParamSet:function(a,b){d.log("page: handleReceiveWidgetParamSet {param: "+b.name+"}");var c=a.param(b.name);null!=c&&c.notifyValueChange(b.value)},handleReceiveWidgetActionAdded:function(a,b){d.log("page: handleReceiveWidgetActionAdded {action: "+b.name+"}"),a.addActionProxy(b.name,b)},handleReceiveWidgetActionRemoved:function(a,b){d.log("page: handleReceiveWidgetActionRemoved {action: "+b+"}"),a.removeActionProxy(b)},handleReceiveWidgetActionChanged:function(a,b){d.log("page: handleReceiveWidgetActionChanged {action: "+b.name+"}");var c=a.action(b.name);null!=c&&c.notifyPropertyChange(b.property,b.value)},handleReceiveWidgetActionInvoked:function(a,b){d.log("page: handleReceiveWidgetActionInvoked {action: "+b.name+"}");var c=a.action(b.name);null!=c&&c.invokeFromWidget(b.returnValue)},handleReceiveWidgetActionParamAdded:function(a,b){d.log("page: handleReceiveWidgetActionParamAdded {actionparam: "+b.name+"}");var c=a.action(b.actionName);null!=c&&c.addParam(b.name,b)},handleReceiveWidgetActionParamRemoved:function(a,b){d.log("page: handleReceiveWidgetActionParamRemoved {actionparam: "+b+"}");var c=a.action(b.actionName);null!=c&&c.removeParam(b.name)},handleReceiveWidgetActionParamChanged:function(a,b){d.log("page: handleReceiveWidgetActionParamChanged {actionparam: "+b.name+"}");var c=a.action(b.actionName);if(null!=c){var e=c.param(b.name);null!=e&&e.notifyPropertyChange(b.property,b.value)}},handleReceiveWidgetEventAdded:function(a,b){d.log("page: handleReceiveWidgetEventAdded {event: "+b.name+"}"),a.addEventProxy(b.name,b)},handleReceiveWidgetEventRemoved:function(a,b){d.log("page: handleReceiveWidgetEventRemoved {event: "+b+"}"),a.removeEventProxy(b)},handleReceiveWidgetEventChanged:function(a,b){d.log("page: handleReceiveWidgetEventChanged {event: "+b.name+"}");var c=a.event(b.name);null!=c&&c.notifyPropertyChange(b.property,b.value)},handleReceiveWidgetEventTriggered:function(a,b){d.log("page: handleReceiveWidgetEventTriggered {event: "+b.name+"}");var c=a.event(b.name);null!=c&&c.triggerEventFromWidget(b.value)}},d.Root.WidgetPrototype={initInternal:function(){this.loadCurrent(),e._svidget="widget"},readyWidget:function(){d.log("widget: readyWidget"),this.startWidget(),this.markLoaded()},loadCurrent:function(){var a=new d.Widget;this.setCurrent(a),this.setCurrent=null,Object.defineProperty(this,"$",d.readOnlyProperty(a))},startWidget:function(){var a=this.current();this.parseElements(),this.connected()?this.startWidgetConnected(a):this.startWidgetStandalone(a)},startWidgetStandalone:function(a){var b=this.getParamValuesFromQueryString();this.setParamValues(a,b,!0),a.start()},startWidgetConnected:function(a){null!=this.paramValues&&(this.setParamValues(this.paramValues),this.paramValues=null,a.setPopulatedFromPage()),a.start()},parseElements:function(){var a=this.getParamsElement();this.populateParams(a);var b=this.getActionsElement();this.populateActions(b);var c=this.getEventsElement();this.populateEvents(c)},getParamsElement:function(){return this.getSvidgetElement("params")},getActionsElement:function(){return this.getSvidgetElement("actions")},getEventsElement:function(){return this.getSvidgetElement("events")},getSvidgetElement:function(a){var b=d.DOM.getByNameSvidget(a,!0);return 0==b.length?null:b[0]},populateParams:function(a){if(null!=a){var b=this,c=this.current();this.populateElementObjects(a,function(a,c){var d=b.buildParam(a,c);null!=d&&c.addParam(d)}),this.wireDeclaredHandler(c,c.ondeclaredparamadd,d.DOM.attrValue(a,"onadd")),this.wireDeclaredHandler(c,c.ondeclaredparamremove,d.DOM.attrValue(a,"onremove"))}},buildParam:function(a,b){if(!this.isValidSvidgetElement(a,"param"))return null;var c=d.DOM.attrValue(a,"name");if(null==c)return null;var e=d.DOM.attrValue(a,"value"),f=this.buildOptions(a,d.Param.optionProperties),g=new d.Param(c,e,f,b);return this.wireDeclaredChangeHandler(g,d.DOM.attrValue(a,"onchange")),this.wireDeclaredSetHandler(g,d.DOM.attrValue(a,"onset")),g},populateActions:function(a){if(null!=a){var b=this,c=this.current();this.populateElementObjects(a,function(a,c){var d=b.buildAction(a,c);null!=d&&(c.addAction(d),b.populateActionParams(a,d))}),this.wireDeclaredHandler(c,c.ondeclaredactionadd,d.DOM.attrValue(a,"onadd")),this.wireDeclaredHandler(c,c.ondeclaredactionremove,d.DOM.attrValue(a,"onremove"))}},populateActionParams:function(a,b){if(null!=a){var c=this;this.populateElementObjects(a,function(a){var d=c.buildActionParam(a,b);null!=d&&b.addParam(d)})}},buildAction:function(a,b){if(!this.isValidSvidgetElement(a,"action"))return null;var c=d.DOM.attrValue(a,"name");if(null==c)return null;var e=this.buildOptions(a,d.Action.optionProperties),f=new d.Action(c,e,b);return this.wireDeclaredChangeHandler(f,d.DOM.attrValue(a,"onchange")),this.wireDeclaredInvokeHandler(f,d.DOM.attrValue(a,"oninvoke")),this.wireDeclaredParamAddHandler(f,d.DOM.attrValue(a,"onparamadd")),this.wireDeclaredParamRemoveHandler(f,d.DOM.attrValue(a,"onparamremove")),this.wireDeclaredParamChangeHandler(f,d.DOM.attrValue(a,"onparamchange")),f},buildActionParam:function(a,b){if(!this.isValidSvidgetElement(a,"actionparam"))return null;var c=d.DOM.attrValue(a,"name");if(null==c)return null;var e=this.buildOptions(a,d.ActionParam.optionProperties),f=new d.ActionParam(c,e,b);return this.wireDeclaredChangeHandler(f,d.DOM.attrValue(a,"onchange")),f},populateEvents:function(a){if(null!=a){var b=this,c=this.current();this.populateElementObjects(a,function(a,c){var d=b.buildEvent(a,c);null!=d&&c.addEvent(d)}),this.wireDeclaredHandler(c,c.ondeclaredeventadd,d.DOM.attrValue(a,"onadd")),this.wireDeclaredHandler(c,c.ondeclaredeventremove,d.DOM.attrValue(a,"onremove"))}},buildEvent:function(a,b){if(!this.isValidSvidgetElement(a,"event"))return null;var c=d.DOM.attrValue(a,"name");if(null==c)return null;var e=this.buildOptions(a,d.EventDesc.optionProperties),f=new d.EventDesc(c,e,b);return this.wireDeclaredChangeHandler(f,d.DOM.attrValue(a,"onchange")),this.wireDeclaredTriggerHandler(f,d.DOM.attrValue(a,"ontrigger")),f},populateElementObjects:function(a,b){if(null!=a&&null!=a.childNodes)for(var c=this.current(),d=a.firstElementChild;null!=d;)b&&b(d,c),d=d.nextElementSibling},buildOptions:function(a,b){var c={};if(null==b||!d.isArray(b))return c;for(var e=0;e<b.length;e++){var f=b[e],g=d.DOM.attrValue(a,f);null!=g&&(c[f]=g)}return c},wireDeclaredChangeHandler:function(a,b){this.wireDeclaredHandler(a,a.ondeclaredchange,b)},wireDeclaredSetHandler:function(a,b){this.wireDeclaredHandler(a,a.ondeclaredset,b)},wireDeclaredInvokeHandler:function(a,b){this.wireDeclaredHandler(a,a.ondeclaredinvoke,b)},wireDeclaredTriggerHandler:function(a,b){this.wireDeclaredHandler(a,a.ondeclaredtrigger,b)},wireDeclaredParamAddHandler:function(a,b){this.wireDeclaredHandler(a,a.ondeclaredparamadd,b)},wireDeclaredParamRemoveHandler:function(a,b){this.wireDeclaredHandler(a,a.ondeclaredparamremove,b)},wireDeclaredParamChangeHandler:function(a,b){this.wireDeclaredHandler(a,a.ondeclaredparamchange,b)},wireDeclaredHandler:function(a,b,c){if(null!=b){var e=d.findFunction(c);null!=e&&d.isFunction(e)&&b.call(a,e)}},connectWidget:function(a,b,c){var e=this.current();e.connected()||(c?(d.log("widget: connect {id: "+a+"}"),e.connect(a),this.getset("connected",!0)):d.log("widget: standalone {id: "+a+"}"),this.paramValues=b||{},this.fixSizing())},startWidgetWithPageParams:function(){var a=this.current();a.started()&&(this.setParamValues(a,this.paramValues),a.setPopulatedFromPage())},getParamValuesFromQueryString:function(){var a=d.Util.queryString();return a},setParamValues:function(a,b,c){var d=a.params();null!=d&&d.each(function(a){var d=c?a.shortname()||a.name():a.name(),e=b[d];void 0===e&&(e=b[a.name()]),void 0===e&&(e=a.defvalue()),void 0!==d&&a.value(e)})},isValidSvidgetElement:function(a,b){return null!=a&&a.localName==b&&a.namespaceURI==d.Namespaces.svidget},fixSizing:function(){var a=d.DOM.root();a&&a.viewBox&&a.viewBox.baseVal&&a.viewBox.baseVal.width>0&&a.viewBox.baseVal.height>0&&(a.setAttribute("width","100%"),a.setAttribute("height","100%"))},current:function(){return this.getset("current")},connected:function(){return this.getset("connected")},receiveFromParent:function(a,b){d.log("widget: receiveFromParent {name: "+a+"}"),"start"==a?this.handleReceiveParentStart(b):"actioninvoke"==a?this.handleReceiveParentActionInvoke(b):"eventtrigger"==a?this.handleReceiveParentEventTrigger(b):"propertychange"==a&&this.handleReceiveParentPropertyChange(b)},signalStartAck:function(){d.log("widget: signalStartAck {id: "+this.current().id()+"}");var a=this.current().toTransport();this.comm().signalParent("startack",a,this.current().id())},signalParamAdded:function(a){if(this.connected()){d.log("widget: signalParamAdded {id: "+this.current().id()+"}");var b=a.toTransport();this.comm().signalParent("paramadded",b,this.current().id())}},signalParamRemoved:function(a){this.connected()&&(d.log("widget: signalParamRemoved {id: "+this.current().id()+"}"),this.comm().signalParent("paramremoved",a,this.current().id()))},signalParamChanged:function(a,b){this.connected()&&(d.log("widget: signalParamChanged {id: "+this.current().id()+"}"),b.name=a.name(),this.comm().signalParent("paramchanged",b,this.current().id()))},signalParamSet:function(a,b){this.connected()&&(d.log("widget: signalParamSet {id: "+this.current().id()+"}"),b.name=a.name(),this.comm().signalParent("paramset",b,this.current().id()))},signalActionAdded:function(a){if(this.connected()){d.log("widget: signalActionAdded {id: "+this.current().id()+"}");var b=a.toTransport();this.comm().signalParent("actionadded",b,this.current().id())}},signalActionRemoved:function(a){this.connected()&&(d.log("widget: signalActionRemoved {id: "+this.current().id()+"}"),this.comm().signalParent("actionremoved",a,this.current().id()))},signalActionChanged:function(a,b){this.connected()&&(d.log("widget: signalActionChanged {id: "+this.current().id()+"}"),b.name=a.name(),this.comm().signalParent("actionchanged",b,this.current().id()))},signalActionInvoked:function(a,b){this.connected()&&(d.log("widget: signalActionInvoked {id: "+this.current().id()+"}"),b.name=a.name(),this.comm().signalParent("actioninvoked",b,this.current().id()))},signalActionParamAdded:function(a,b){if(this.connected()){d.log("widget: signalActionParamAdded {id: "+this.current().id()+"}");var c=a.toTransport();c.actionName=b,this.comm().signalParent("actionparamadded",c,this.current().id())}},signalActionParamRemoved:function(a,b){if(this.connected()){d.log("widget: signalActionParamRemoved {id: "+this.current().id()+"}");var c={name:a,actionName:b};this.comm().signalParent("actionparamremoved",c,this.current().id())}},signalActionParamChanged:function(a,b,c){this.connected()&&(d.log("widget: signalActionParamChanged {id: "+this.current().id()+"}"),c.name=a.name(),c.actionName=b.name(),this.comm().signalParent("actionparamchanged",c,this.current().id()))},signalEventAdded:function(a){if(this.connected()){d.log("widget: signalEventAdded {id: "+this.current().id()+"}");var b=a.toTransport();this.comm().signalParent("eventadded",b,this.current().id())}},signalEventRemoved:function(a){this.connected()&&(d.log("widget: signalEventRemoved {id: "+this.current().id()+"}"),this.comm().signalParent("eventremoved",a,this.current().id()))},signalEventChanged:function(a,b){this.connected()&&(d.log("widget: signalEventChanged {id: "+this.current().id()+"}"),b.name=a.name(),this.comm().signalParent("eventchanged",b,this.current().id()))},signalEventTriggered:function(a,b){if(this.connected()){d.log("widget: signalEventTriggered {id: "+this.current().id()+"}");var c={name:a.name(),value:b};this.comm().signalParent("eventtriggered",c,this.current().id())}},handleReceiveParentStart:function(a){a=a||{};var b=a.connected!==!1;this.connectWidget(a.id,a.params,b),b&&this.signalStartAck(),this.startWidgetWithPageParams()},handleReceiveParentPropertyChange:function(a){a=a||{};a.type;if("param"==a.type&&"value"==a.propertyName&&null!=a.name){var b=this.current().param(a.name);null!=b&&b.value(a.value)}},handleReceiveParentActionInvoke:function(a){a=a||{};var b=a.action,c=this.current().action(b);null!=c&&c.external()&&c.invokeApply(a.args)},handleReceiveParentEventTrigger:function(a){a=a||{};var b=a.event,c=this.current().event(b);null!=c&&c.external()&&c.trigger(a.data)}},e.document||console.warn("svidget requires a global windowy object with window.document to work correctly."),new d.Root(e,b)});